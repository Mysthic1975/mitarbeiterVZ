<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">
<head>
    <title>Mitarbeiterverzeichnis</title>
</head>
<body>

<div layout:fragment="content">

    <h1 class="my-4">Mitarbeiterverwaltung</h1>

    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th><a th:href="@{/employee/sort/id/asc}">ID <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/id/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/firstName/asc}">Vorname <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/firstName/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/lastName/asc}">Nachname <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/lastName/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/position/asc}">Position <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/position/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/department/asc}">Abteilung <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/department/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/email/asc}">E-Mail <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/email/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th>Telefonnummer</th>
            <th></th>
        </tr>
        </thead>
        <tbody>

        <tr th:each="employee : ${employees}">

            <td th:text="${employee.id}"></td>
            <td th:text="${employee.firstName}"></td>
            <td th:text="${employee.lastName}"></td>
            <td th:text="${employee.position}"></td>
            <td th:text="${employee.department}"></td>
            <td th:text="${employee.email}"></td>
            <td th:text="${employee.phoneNumber}"></td>

            <!-- Bearbeiten- und Löschen-Button in einer Spalte -->
            <td class="text-center">
                <a th:href="@{/employee/{id}/edit(id=${employee.id})}" class="btn btn-icon-small"><i class="material-icons">edit</i></a>
                <a th:href="@{/employee/{id}/delete(id=${employee.id})}" class="btn btn-icon-small delete-button"><i class="material-icons text-danger">delete</i></a>
            </td>

        </tr>
        </tbody>
    </table>

    <div>
        <a th:href="@{'/employee?page=' + ${page + 1} + '&size=10'}">Vor</a>
        <a th:href="@{'/employee?page=' + ${page - 1} + '&size=10'}">Zurück</a>
    </div>

</div>

<script layout:fragment="scripts">

    function confirmDelete() {

        const deleteButtons = document.querySelectorAll('.delete-button');
        for (let i = 0; i < deleteButtons.length; i++) {
            deleteButtons[i].addEventListener('click', function(event) {
                if (!confirm('Möchtest du diesen Mitarbeiter wirklich löschen?')) {
                    event.preventDefault();
                }
            });
        }
    }

    window.addEventListener('load', confirmDelete);
</script>

</body>
</html>