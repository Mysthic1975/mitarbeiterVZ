<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}">
<head>
    <title>Mitarbeiterverzeichnis</title>
</head>
<body>

<div layout:fragment="content">

    <h1 class="my-4">Mitarbeiterverwaltung</h1>

    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th><a th:href="@{/employee/sort/id/asc}">ID <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/id/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/firstName/asc}">Vorname <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/firstName/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/lastName/asc}">Nachname <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/lastName/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/position/asc}">Position <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/position/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/department/asc}">Abteilung <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/department/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th><a th:href="@{/employee/sort/email/asc}">E-Mail <i class="material-icons">arrow_upward</i></a><a th:href="@{/employee/sort/email/desc}"><i class="material-icons">arrow_downward</i></a></th>
            <th>Telefonnummer</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <!-- Schleife zum Anzeigen aller Mitarbeiter -->
        <tr th:each="employee : ${employees}">
            <!-- ID des Mitarbeiters -->
            <td th:text="${employee.id}"></td>
            <!-- Vorname des Mitarbeiters -->
            <td th:text="${employee.firstName}"></td>
            <!-- Nachname des Mitarbeiters -->
            <td th:text="${employee.lastName}"></td>
            <!-- Position des Mitarbeiters -->
            <td th:text="${employee.position}"></td>
            <!-- Abteilung des Mitarbeiters -->
            <td th:text="${employee.department}"></td>
            <!-- E-Mail des Mitarbeiters -->
            <td th:text="${employee.email}"></td>
            <!-- Telefonnummer des Mitarbeiters -->
            <td th:text="${employee.phoneNumber}"></td>

            <!-- Bearbeiten- und Löschen-Button in einer Spalte -->
            <td class="text-center">
                <a th:href="@{/employee/{id}/edit(id=${employee.id})}" class="btn btn-icon-small"><i class="material-icons">edit</i></a>
                <a th:href="@{/employee/{id}/delete(id=${employee.id})}" class="btn btn-icon-small delete-button"><i class="material-icons text-danger">delete</i></a>
            </td>

        </tr>
        </tbody>
    </table>

</div>

<script layout:fragment="scripts">
    // Funktion zum Anzeigen einer Bestätigungsdialogbox, wenn der Benutzer auf den Löschen-Button klickt
    function confirmDelete() {
        // Alle Löschen-Schaltflächen finden
        const deleteButtons = document.querySelectorAll('.delete-button');
        // Jede Schaltfläche durchlaufen
        for (let i = 0; i < deleteButtons.length; i++) {
            // Event-Listener zum Anzeigen der Bestätigungsdialogbox hinzufügen
            deleteButtons[i].addEventListener('click', function(event) {
                // Bestätigungsdialogbox anzeigen
                if (!confirm('Möchtest du diesen Mitarbeiter wirklich löschen?')) {
                    // Wenn der Benutzer auf "Abbrechen" klickt, das Löschen verhindern
                    event.preventDefault();
                }
            });
        }
    }

    // Event-Listener zum Anzeigen der Bestätigungsdialogbox hinzufügen, wenn die Seite geladen wird
    window.addEventListener('load', confirmDelete);
</script>

</body>
</html>
